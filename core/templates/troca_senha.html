{% extends 'base.html' %}
{% load static %}

{% block conteudo %}


<div class="container">
    <div class="quadrado">
        <h1>Login Usuário</h1>
        {% if mensagem %}
          <p class="text-danger">{{ mensagem }}</p>
        {% endif %} 
        {% if menssagem_sucesso_cadastro %}
          <p class="text-success">{{ menssagem_sucesso_cadastro }}</p>
        {% endif %} 
        
        <form action="{% url 'trocando_senha' %}" method="post" class="form_login">
            {% csrf_token %}
            <div class="">
                <label for="email">Digite Seu Email Cadastrado</label><br>
                <input type="email" name="email" id="email" placeholder="email" class="login_input">
            </div>
            <div class="mt-3">
                <label for="senha">Digite a Nova Senha</label><br>
                <input type="password" name="senha" id="senha" placeholder="senha" class="login_input">
            </div>
            <div class="mt-3 ml-auto">
                <input type="submit" id="trocar-senha" value="Alterar" placeholder="senha" class="login_input">
            </div>
        </form>
    </div>
</div>

<script>
    let gerarCsv = document.getElementById("trocar-senha"); 

    // Adicione um ouvinte de evento ao botão de envio
    gerarCsv.addEventListener("click", function() {
        let checkboxesSelecionados = document.querySelectorAll(".solicitacoes input[type='checkbox']:checked");
        let mensagem = "Você Confirma a alteração de sua senha?\n";

        checkboxesSelecionados.forEach(function(checkbox) {
            mensagem;
        });

        // Exiba um pop-up de confirmação com os checkboxes selecionados
        if (window.confirm(mensagem)) {
            // Se o usuário confirmar, envie os dados para o servidor
            document.querySelector("trocando_senha").submit();
        }else{
            event.preventDefault(); // Impede o envio do formulário se o usuário cancelar
        }

    });

</script>

{% endblock %}